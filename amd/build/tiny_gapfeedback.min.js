define("qtype_gapfill/tiny_gapfeedback",["exports","qtype_gapfill/gaps","qtype_gapfill/modal"],(function(_exports,_gaps,_modal){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;const createGapSelectArea=()=>{const editor=tinyMCE.get("id_questiontext"),container=editor.getContainer(),tox=container.querySelector(".tox-edit-area"),existingSelectArea=document.getElementById("tiny_select_area");if(existingSelectArea)return existingSelectArea.remove(),void(container.style.display="block");const editorElement=tox.querySelector(".tox-edit-area"),editorWidth=editorElement?editorElement.offsetWidth:container.offsetWidth,editorHeight=editorElement?editorElement.offsetHeight:container.offsetHeight,questionText=editor.getContent(),processedText=(0,_gaps.parseQuestionText)(questionText),selectArea=document.createElement("div");selectArea.id="tiny_select_area",selectArea.className="tiny_select_area",selectArea.contentEditable="false",selectArea.innerHTML=processedText,selectArea.style.width=editorWidth+"px",selectArea.style.height=editorHeight+"px",container.parentNode.insertBefore(selectArea,container.nextSibling),container.style.display="none",selectArea.addEventListener("click",(event=>(event=>{event.preventDefault(),event.stopPropagation();const gapInfo=(0,_gaps.getGap)(event);gapInfo&&(0,_modal.showGapSettingsModal)(gapInfo)})(event)),!0),setTimeout((()=>{(0,_gaps.initializeAllGapClasses)()}),100)};_exports.init=async()=>{const button=document.getElementById("id_itemsettings_button");button&&button.addEventListener("click",(event=>{event.preventDefault(),createGapSelectArea()}))}}));

//# sourceMappingURL=tiny_gapfeedback.min.js.map